\documentclass{ltxdoc}
\usepackage{byrne}
\usepackage{ccicons,bxtexlogo,listings,hyperref}

\lstset{
language=MetaPost,
numbers=left,
numberstyle=\tiny,
basicstyle=\scriptsize
}

\lstnewenvironment{MetaPostCode}
  {\lstset{language=TeX,basicstyle=\ttfamily\scriptsize,frame=none}}
  {}
\lstnewenvironment{LaTeXCode}
  {\lstset{language=MetaPost,basicstyle=\ttfamily\scriptsize,frame=none}}
  {}

\author{Sergey Slyusarev}
\title{``Byrne'' v. 0.2.2 package for \METAPOST and \LaTeX}

\begin{document}
\maketitle

\begin{abstract}
This document describes ``Byrne'' package for \METAPOST\ and \LaTeX.
\end{abstract}

\begin{centering}

This document is distributed under CC-BY-SA 4.0 license 

\ccbysa 

https://github.com/jemmybutton/byrne-latex

\end{centering}

\section{Introduction}
Oliver Byrne's 1847 quirky edition on the first six books of Euclid's ``Elements'' is an interesting example of tight interplay between text and graphics in information visualization. The main feature of this book is that instead of relying on letter designations to describe lines, angles, etc., all the diagrams are colored and parts of these diagrams are directly incorporated into text.

Recently this work met somewhat of a renaissance and in the span of a couple of years at least three independent attempts were made at reviving Byrne's work. In early 2017 the first six books \href{https://github.com/jemmybutton/byrne-euclid/}{remade in \ConTeXt} were published on GitHub, in the late 2018 an \href{https://www.c82.net/euclid/}{interactive web-version} was published by Nicholas Rougeux and in late 2019 a \href{https://www.kroneckerwallis.com/product/euclids-elements-completing-oliver-byrnes-work/}{printed version} of all Euclid's 15 books was published by Kronecker Wallis. All three seem to be very different in terms of approach and goals.

The \ConTeXt\ version's main goal was to develop a toolkit for applying Byrne's approach to a variety of geometry problems in the least time-consuming manner. This package is a \LaTeX\ (specifically \LuaLaTeX) version of this toolkit. It consists of two parts: \METAPOST\ code to describe and render geometric constructions and \LaTeX\ code to incorporate these constructions in text.

\section{Requirements}

This package works with \LuaLaTeX\ and requires \texttt{luamplib v2.23.0} or later. The document should contain \cs{usepackage\{byrne\}} in the preamble.

\section{An example}

\begin{minipage}{\textwidth}
\vskip 0.5\baselineskip
\defineNewPicture{
textLabels := true;
pair A, B, C;
A := (0, 0);
B := (0, 2cm);
C := (3cm, 0);
byAngleDefine(C, B, A, byyellow, 0);
byAngleDefine(B, A, C, byblue, 0);
byAngleDefine(A, C, B, byred, 0);
draw byNamedAngleResized();
byLineDefine(A, B, byred, 0, 0);    
byLineDefine(B, C, byblue, 0, 0);   
byLineDefine(C, A, byyellow, 0, 0); 
draw byNamedLineSeq(0)(AB,BC,CA);
draw byLabelsOnPolygon(A, B, C)(0, 0);
}
~\hfill\drawCurrentPicture\hfill~
\vskip \baselineskip

In 
\drawFromCurrentPicture[middle][triangleABC]{
draw byNamedLineSeq(0)(AB,BC,CA);
draw byLabelsOnPolygon(A, B, C)(0, 0);
} 
the angle \drawAngle{A} 
is a right angle, therefore \triangleABC 
is a right-angled triangle. 
In it $\drawUnitLine{CB} > \drawUnitLine{AB}$ 
and $\drawUnitLine{BC} > \drawUnitLine{AC}$.
\end{minipage}

\vskip 2\baselineskip
The construction above is described like this:
\vskip 1.5\baselineskip

\begin{LaTeXCode}
\defineNewPicture{ % MetaPost code to describe the main diagram is placed inside
  textLabels := true; % This turns text labels on
  pair A, B, C; 
  A := (0, 0);  
  B := (0, 2cm);
  C := (3cm, 0);
  byAngleDefine(C, B, A, byyellow, 0); % This defines a yellow angle CBA
  byAngleDefine(B, A, C, byblue, 0);   
  byAngleDefine(A, C, B, byred, 0);    
  draw byNamedAngleResized(); % Draws angles. 
  byLineDefine(A, B, byred, 0, 0);    % This defines a red line AB. 
  byLineDefine(B, C, byblue, 0, 0);   
  byLineDefine(C, A, byyellow, 0, 0); 
  draw byNamedLineSeq(1)(AB,BC,CA); % Draws joint lines in sequence
  draw byLabelsOnPolygon(A, B, C)(0, 0); % Draws text labels
}                                   

\drawCurrentPicture % Draws the diagram

In 
\drawFromCurrentPicture[middle][triangleABC]{ % Draws an image based 
  draw byNamedLineSeq(0)(AB,BC,CA);           % on the last diagram
}
the angle \drawAngle{A} is a right angle, therefore \triangleABC\ is
a right-angled triangle. In it $\drawUnitLine{CB} > \drawUnitLine{AB}$ 
and $\drawUnitLine{BC} > \drawUnitLine{AC}$. 
\end{LaTeXCode}

\vskip 1.5\baselineskip

Several things to note here. 

In the \METAPOST\ part: 
All 2D points are ordinary \METAPOST\ pairs and can be defined and manipulated as such. Normally every part of the diagram is first defined (e.g. \texttt{byAngleDefine} or \texttt{byLineDefine}) and then is drawn (e.g. \texttt{draw byNamedAngleResized...} or \texttt{draw byNamedLineSeq...}). Also, although Byrne's original book didn't include text labels at all, they are implemented in this package. Normally they are placed semi-manually in the main diagram (using functions like \texttt{byLabelsOnPolygon}) and mostly automatically in offspring pictures. By default they are turned off, and to turn them on \texttt{textLabels := true;} should be set.

In the \LaTeX\ part: 
The most general way to reference the main diagram is to use \cs{drawFromCurrentPicture}. It will process arbitrary \METAPOST\ code based on the main diagram's code and output an image. However, it would be too cumbersome to use this route every time, so a few shortcuts are in place. If you do need to process arbitrary code, you can give the picture a name (in the example it's ``triangleABC''). It will define a macro of the same name \cs{triangleABC} which will output the same image. For most common cases there are special macros which don't require you to write any \METAPOST\ code. For instance \cs{drawAngle} and \cs{drawUnitLine} allow you to call angles and lines simply by name. The names don't have to match the initial definition exactly. For instance, the angle in the example can be called ``A'', ``BAC'' or ``ABC'' interchangably, or the line can be called either ``BC'' or ``CB'', depending on your intentions.

For more examples you can look at the source code of the \href{https://github.com/jemmybutton/byrne-euclid/}{\ConTeXt\ version of Byrne's book.} This package shares syntax with it and code can be transferred to \LaTeX\ with minimal changes.

The following reference is incomplete and will be updated in the future.

\section{\METAPOST\ part reference}

\section{Variables and settings}

\subsubsection{Variables}\label{Variable}
	
	There are several variables which control the looks and behaviour.
	
	\texttt{lineWidth} — the width for regular lines, set to \texttt{2pt} by default.
	
	\texttt{lineWidthThin} — the width for thin lines, set to \texttt{1pt} by default.
	
	\texttt{lineWidthHair} — the width for superthin lines, set to \texttt{1/2pt} by default.
	
	\texttt{pointMarkSize} — size of point marks, set to \texttt{4pt} by default.
	
	\texttt{pointLinesSize} — size for line secments used to depict points, set to \texttt{1/2cm} by default.

	\texttt{defaultScaleFactor} — global default scale factor, set to \texttt{1} by default.
	
	\texttt{angleScale} — scale factor for angle arcs, set to \texttt{1} by default.

	\texttt{globalRotation} — angle to rotate the whole constructions.

	\texttt{markLength} — size of marks on lines, set to \texttt{3lineWidth} by default.

	\texttt{rayExtension} — length for a ray depiction, set to \texttt{1/3cm} by default.

%	magnitudeScale := 5/18;
%	magnitudeGap := 3/2lineWidth;
	
	\texttt{textLabels} — whether to render text labels, set to \texttt{false} by default.

%ghostLines := true;

	\texttt{autoRightAngles} — whether to depict right angles using angles instead of arcs, set to \texttt{false} by default.

%omitDuplicateTextLabels := false;
	
	\texttt{textLabelShift} — how far away to put text labels from points, set to \texttt{lineWidth} by default.
	
%autoLabelingMode := false;
%mainPictureMode := false;

%pathToString

\subsubsection{defineColor.ColorName(color)}\label{defineColor}
	
	Defines a color. Colors can be defined as regular \METAPOST\ colors as well, this is just a shorthand version. Some colors are pre-defined: \texttt{byred}, \texttt{byblue}, \texttt{byyellow}, \texttt{byblack}, \texttt{bygrey}.

	\texttt{ColorName} — mandatory color name of \texttt{suffix type}.
	
	\texttt{color} — an actual calor, can be either of \texttt{color} type or of \texttt{cmykcolor} type.

%\subsubsection{selectOutlineColor.ColorName}\label{selectOutlineColor}
	
%	Selects an outline color for a color.

%	\texttt{ColorName} — mandatory color name of \texttt{suffix type}.
	
% ...

\subsubsection{startTempScale(tmpScale); ... \METAPOST\ code ... stopTempScale;}\label{startTempScale}

	Used to temporarily set scale factor for a section of code;

	\texttt{tmpScale} — scale factor for a section of code.
		
\subsubsection{startTempAngleScale(tmpAngleScale); ... \METAPOST\ code ... stopTempAngleScale;}\label{startTempAngleScale}

	Used to temporarily set angle scale factor for a section of code;

	\texttt{tmpAngleScale} — angle scale factor for a section of code.

\subsubsection{startGlobalRotation(rotationAngle); ... \METAPOST\ code ... stopGlobalRotation;}\label{startGlobalRotation}

	Used to temporarily set global rotation for a section of code;

	\texttt{rotationAngle} — global rotation for a section of code.
	
%startAutoLabeling
%stopAutoLabeling

%startOffspringPictureMode
%stopOffspringPictureMode

%startMainPictureMode
%stopMainPictureMode

\subsection{Lines}

% byLineRender
% byReturnLineLength

\subsubsection{byLineDefine.LineName(A, B, color, dashed, thick)}\label{byLineDefine}

	Defines a straight line. Does not return anything.
	
	\texttt{LineName} — optional line name of \texttt{suffix type}. If no name is provided, it is being constructed from point names, e.g. \texttt{AB}.
	
	\texttt{A, B} — point names, of \texttt{suffix} type (i. e., variable names should be provided).
	
	\texttt{color} — line color, of \texttt{color} type.
	
	\texttt{dashed} — is line dashed. \texttt{0} for solid line and \texttt{1} for dashed line.
	
	\texttt{thick} — is line thick. \texttt{0} for regular line and \texttt{1} for thin line.

% byLineStylize

\subsubsection{byLine.LineName(A, B, color, dashed, thick)}\label{byLine}

	Defines and draws a straight line. Returns a \texttt{picture} of the line.
	
	Arguments are the same as in \texttt{byLineDefine} \ref{byLineDefine}.

% byLineFull
% byLineWithName
% byNamedLineFull

\subsubsection{byNamedLine(LINES\_LIST)}\label{byNamedLine}

	Draws lines. Returns a picture of the lines.
	
	\texttt{LINES\_LIST} — a comma-separated list of line names.

\subsubsection{byNamedLineSeq(lineShift)(LINES\_LIST)}\label{byNamedLineSeq}
	
	Draws lines joined in sequence. Returns a picture of the lines.
	
	\texttt{lineShift} — how much the lines are shifted perpendicular lines' axis. \texttt{$1$} is for one regular line thickness to one side, \texttt{$-1$} is for one regular line thickness to the other side.
	
	\texttt{LINES\_LIST} — a comma-separated list of line names.

\subsubsection{byMarkLine(position, color)(LineName)}\label{byMarkLine}

	Defines and draws a mark on a line.
	
	\texttt{position} — a position of the mark. \texttt{0} for one end of the line, \texttt{1} for the other end of the line.
	
	\texttt{color} — mark color, of \texttt{color} type.
	
	\texttt{LineName} — line name, of \texttt{suffix} type.

\subsubsection{byNamedMarkLine(LineName)}

	Draws a mark on the given line.
	
	\texttt{LineName} — line name, of \texttt{suffix} type.
	
%byFindLinePointedThere
%byConstructCompoundLine
%byExpandLines
%byNamedCompoundLine
%byNamedCompoundRay
%byNamedCompoundIndLine
%byNamedCompoundLineRender
%generateLineSynonyms

\subsection{Points}

\subsubsection{byPointLabelDefine(A, pointLabel)}\label{byPointLabelDefine}

	Defines a point text label, returns nothing. By default point names are the same as the names of respective variables.
	
	\texttt{A} — a name of a point of \texttt{suffix} type  (i. e., variable name should be provided).
	
	\texttt{pointLabel} — point label of \texttt{string} type.

\subsubsection{byPointLabelRemove(POINTS\_LIST)}\label{byPointLabelRemove}

	Sets labels of multiple points to blank. Useful if text labels are turned on, but you don't want labels on certain points.

	\texttt{POINTS\_LIST} — a comma-separated list of point names.

\subsubsection{byPointMarkDefine(PointName)(color, style)}\label{byPointMarkDefine}

	Defines a point mark.

	\texttt{color} — mark color, of \texttt{color} type.

	\texttt{style} — \texttt{0} for solid circle, \texttt{1} for white circle with outline.
		
%byPointXYZDefine
%byPointXYZEmpty
%byIsPointInSpace
%byPair
%byRotatePoints
%byPointMarkRender
%byNamedPointMark
%byPointMark
%byNamedPointLines

\subsection{Arcs and circles}

%byCirclePathGenerate
%byArcRender

\subsubsection{byArcDefineBE.ArcName(O, begin, end, radius, color, dashed, thick, shift, endType)}\label{byArcDefineBE}

Defines an arc based on its center, radius and two angles. Returns nothing.

\texttt{ArcName} — optional arc name of \texttt{suffix type}. If no name is provided, it is being constructed from point name, e.g. \texttt{O}.

\texttt{O} — the center of the circle an arc is from, of \texttt{suffix} type (i. e., variable name should be provided).

\texttt{begin} — beginning of the arc in eighths. \texttt{0} for 3 o'clock, \texttt{2} for 12 o'clock etc.

\texttt{end} — ending of the arc in eighths. \texttt{0} for 3 o'clock, \texttt{2} for 12 o'clock etc.

\texttt{radius} — arc radius.

\texttt{color} — arc color, of \texttt{color} type.

\texttt{dashed} — is arc line dashed. \texttt{0} for solid line and \texttt{1} for dashed line.

\texttt{thick} — is arc line thick. \texttt{0} for regular line and \texttt{1} for thin line.

\texttt{shift} — how much arc line is shifted. \texttt{$1$} is for one regular line thickness outwards, \texttt{$-1$} is for one regular line thickness inwards.

\texttt{endType} — type of arc line ends. \texttt{0} for ends cut by the radii and \texttt{1} for ends cut by the chord.

\subsubsection{byArcBE.arcName(O, begin, end, radius, color, dashed, thick, shift, endType)}\label{byArcBE}

	Defines and draws an arc based on its center, radius and two angles. Returns the picture of the arc.
	
	Arguments are the same as in \texttt{byArcDefineBE} \ref{byArcDefineBE}.

\subsubsection{byArcDefine.ArcName(O, B, E, radius, color, dashed, thick, shift, endType)}\label{byArcDefine}
	
	Defines an arc based on its center, radius and two points. Returns nothing.
	
	Arguments are the same as in \texttt{byArcDefineBE} \ref{byArcDefineBE}, except for instead of angles in eights points are used.
	
	\texttt{ArcName} — optional arc name of \texttt{suffix type}. If no name is provided, it is being constructed from point names, e.g. \texttt{BOE}.
	
	\texttt{B, E} — points in the direction of the beginning and the ending of the arc respectively. Of \texttt{suffix} type (i. e., variable names should be provided).

\subsubsection{byArc.ArcName(O, B, E, radius, color, dashed, thick, shift, endType))}\label{byArc}
	
	Arguments are the same as in \texttt{byArcDefine} \ref{byArcDefine}.
	
\subsubsection{byNamedArcExact(ARCS\_LIST)}\label{byNamedArcExact}
	Draws a picture of arcs just as they were defined. Returns a picture of the arcs.
	
	\texttt{ARCS\_LIST} — a comma-separated list of arc names.
	
\subsubsection{byNamedArc(ARCS\_LIST)}\label{byNamedArc}
	Draws a picture of arcs, except of it ignores \texttt{shift} and \texttt{endType}. Returns a picture of the arcs.
	
	\texttt{ARCS\_LIST} — a comma-separated list of arc names.

%byNamedArcLabel

\subsubsection{byCircleDefineFree.CircleName(o, radius, color, dashed, thick, shift)}\label{byCircleDefineFree}
	
	Defines a circle based on its center and radius. Returns nothing.
	
	\texttt{CircleName} — optional circle name of \texttt{suffix type}. If no name is provided, \texttt{aCircle} is used for a name.
	
	\texttt{o} — the center of the circle, of \texttt{pair} type.
	
	\texttt{radius} — circle radius.
	
	\texttt{color} — circle color, of \texttt{color} type.
	
	\texttt{dashed} — is circle line dashed. \texttt{0} for solid line and \texttt{1} for dashed line.
	
	\texttt{thick} — is circle line thick. \texttt{0} for regular line and \texttt{1} for thin line.
	
	\texttt{shift} — how much circle line is shifted. \texttt{$1$} is for one regular line thickness outwards, \texttt{$-1$} is for one regular line thickness inwards.

\subsubsection{byCircleDefineR.CircleName(O, radius, color, dashed, thick, shift)}\label{byCircleDefineR}
	
	Defines a circle based on its center and radius. Returns nothing.
	
	Arguments are the same as in \texttt{byCircleDefineFree} \ref{byCircleDefineFree}, except for the center is not defined directly by a \texttt{pair}.
	
	\texttt{CircleName} — optional circle name of \texttt{suffix type}. If no name is provided, it is being constructed from center name, e.g. \texttt{O}.
	
	\texttt{O} — the center of the circle. Of \texttt{suffix} type (i. e., variable name should be provided).

\subsubsection{byCircleR.CircleName(O, radius, color, dashed, thick, shift)}\label{byCircleR}
	
	Defines and draws circle based on its center and radius. Returns a picture of that circle.
	
	Arguments are the same as in \texttt{byCircleDefineR} \ref{byCircleDefineR}.

\subsubsection{byCircle.CircleName(O, A, color, dashed, thick, shift)}\label{byCircle}
	
	Defines and draws circle based on its center and a point. Returns a picture of that circle.
	
	Arguments are the same as in \texttt{byCircleDefineR} \ref{byCircleDefineR}, except for instead of the radius, a point through which the circle is drawn is used.
	
	\texttt{CircleName} — optional circle name of \texttt{suffix type}. If no name is provided, it is being constructed from point names, e.g. \texttt{OA}.
	
	\texttt{A} — a point through which the circle is drawn. Of \texttt{suffix} type (i. e., variable name should be provided).

\subsubsection{byCircleABC.CircleName(A, B, C, color, dashed, thick, shift)}\label{byCircleABC}
	
	Arguments are the same as in \texttt{byCircleDefineR} \ref{byCircleDefineR}, except for instead of the center and the radius, three points through which the circle is drawn are used.
	
	\texttt{CircleName} — optional circle name of \texttt{suffix type}. If no name is provided, it is being constructed from point names, e.g. \texttt{ABC}.
	
	\texttt{A, B, C} — points through which the circle is drawn. Of \texttt{suffix} type (i. e., variable names should be provided).

%byFindCircleCenterABC
%byFindCircleCenterABCinSpace
%byReturnCircleCenter

\subsubsection{byNamedCircle(CIRCLES\_LIST)}\label{byNamedCircle}
	
	Draws circles. Returns a picture of the circles.
	
	\texttt{CIRCLES\_LIST} — a comma-separated list of circle names.

\subsection{Arbitraty figures}

\subsubsection{byArbitraryFigureDefine.ArbitraryFigureName(figurePath, color, dashed, thick)}\label{byArbitraryFigureDefine}
	
	Defines an arbitrary figure. Returns nothing.
	
	\texttt{ArbitraryFigureName} — optional figure name of \texttt{suffix type}. If no name is provided, \texttt{anArbitraryFigure} is used for a name.
	
	\texttt{figurePath} — figure path, of \texttt{path} type.
	
	\texttt{color} — figure color, of \texttt{color} type.
	
	\texttt{dashed} — is figure line dashed. \texttt{0} for solid line and \texttt{1} for dashed line.
	
	\texttt{thick} — is figure line thick. \texttt{0} for regular line and \texttt{1} for thin line.

\subsubsection{byArbitraryFigure.ArbitraryFigureName(figurePath, color, dashed, thick)}\label{byArbitraryFigure}

	Defines an arbitrary figure. Returns nothing.
	
	Arguments are the same as in \texttt{byArbitraryFigure} \ref{byArbitraryFigure}.

\subsubsection{byNamedArbitraryFigure(ARBITRARY\_FIGURES\_LIST)}\label{byNamedArbitraryFigure}

	Draws arbitrary figures. Returns a picture of the figures.
	
	\texttt{ARBITRARY\_FIGURES\_LIST} — a comma-separated list of figure names.

%byArbitraryFigureRender
%byArbitraryCurveDefine
%byNamedArbitraryCurve
%byListToPath
%byArbitraryCurve

\subsection{Filled figures}

%byFilledCircleSegment
%byNamedFilledCircleSegment
%byFilledCircleSector
%byNamedFilledCircleSector

\subsubsection{byPolygonDefine.PolygonName(POINTS\_LIST)(Color)}\label{byPolygonDefine}

	Defines a polygon based on its vertex points. Returns nothing.
	
	\texttt{PolygonName} — optional polygon name \texttt{suffix}.
	
	\texttt{POINTS\_LIST} — a comma-separated list of point names.
	
	\texttt{Color} — line color, of \texttt{suffix} type (i.e. a variable name should be provided).

%byPolygonPathFromList

\subsubsection{byPolygon.polygonName(POINTS\_LIST)(Color)}\label{byPolygon}

	Defines and draws a polygon based on its vertex points. Returns a picture of the polygon.
	
	Arguments are the same as in \texttt{byPolygonDefine} \ref{byPolygonDefine}.

%byPolygonName


\subsubsection{byNamedPolygon(POLYGONS\_LIST)}\label{byNamedPolygon}
	
	Draws polygons. Returns a picture of the polygons.
	
	\texttt{POLYGONS\_LIST} — a comma-separated list of polygon names.

%byMergePolygons
%polygonCleanup

\subsection{Angles}

\subsubsection{byAngleDefine.AngleName(A, B, C, color, style)}\label{byAngleDefine}
	
	Defines an angle based on three points. Returns nothing.

	\texttt{AngleName} — optional angle name \texttt{suffix}.
		
	\texttt{A, B, C} — angle points. Of \texttt{suffix} type (i. e., variable names should be provided).
	
	\texttt{color} — angle color, of \texttt{color} type.
	
	\texttt{style} — angle arc style. \texttt{0} for solid filled sector, \texttt{1} for arc, \texttt{2} for dashed arc. For more detains see \ref{AngleStyles}.

%byConstructAngleArc
%byIsArcClockwise
%byFullCircleToPlane

\subsubsection{byAngle.AngleName(A, B, C, color, style)}\label{byAngle}

	Defines and draws an angle based on three points. Returns a picture of the angle.
	
	Arguments are the same as in \texttt{byAngleDefine} \ref{byAngleDefine}.

\subsubsection{byAngleDefineExtended.AngleName(A, B, C, color, style)(OPTIONAL\_COLORS\_LIST)}\label{byAngleDefineExtended}

	Defines an angle based on three points. Returns nothing.
	
	Arguments are the same as in \texttt{byAngleDefine} \ref{byAngleDefine}, except for using this function it's possible to define optional colors for an angle.
	
	\texttt{OPTIONAL\_COLORS\_LIST} — a comma-separated list of optional color names. See \ref{AngleStyles} for details.
	
\subsubsection{byAngleExtended.AngleName(A, B, C, color, style)(OPTIONAL\_COLORS\_LIST)}\label{byAngleExtended}

	Defines and draws an angle based on three points. Returns a picture of the angle.
	
	Arguments are the same as in \texttt{byAngleDefineExtended} \ref{byAngleDefineExtended}.

\subsubsection{byNamedAngle(ANGLES\_LIST)}\label{byNamedAngle}
	
	Draws angles. Returns a picture of the angles.
	
	\texttt{ANGLES\_LIST} — a comma-separated list of polygon names.

%byNamedSolidAngle
%byProcessAnglesList
%byAngleMWhite
%byAngleMSolid
%byAngleMLine
%byAngleMThinLine
%byAngleMDashedLine
%byNamedAngleSidesFull
%byNamedAngleDummySides
%byNamedAngleSides
%byNamedAngleWithDummySides
%byNamedAngleResized
%generateAngleSynonyms
%sortPointAnglesList
%bySplitStringIntoAngles
%byConstructCompoundAngle
%twoRightAngles
%rightAngle
%byDefineGenericRightAngles

\subsubsection{Angle styles}\label{AngleStyles}

	It's possible to add custom angle styles. To do this, you first need to define a function, with a particular set of arguments and then include this function's name in a special list. As an example here's the function which describes a regular solid angle sector:
	
\begin{MetaPostCode}
vardef byAngleMSolid (expr angleArc, angleColor)(suffix AngleOptionalColors) =
    save p;
    path p;
    p := angleArc scaled (angleScale*cm);
    image(
        fill ((0, 0)--p--cycle) withcolor angleColor;
    )
enddef;
\end{MetaPostCode}

	Note the argument \texttt{AngleOptionalColors}. It is not used for solid angles and is not defined with \texttt{byAngleDefine}, but several optional colors can be defined using \texttt{byAngleDefineExtended} \ref{byAngleDefineExtended} and can be accessed using \texttt{AngleOptionalColors[0]}, \texttt{AngleOptionalColors[1]} etc.

	And here's how this angle style is included in the list:

\begin{MetaPostCode}
byAngleMacroName[0] := "byAngleMSolid";
\end{MetaPostCode}

	Here \texttt{0} is the value of \texttt{sty} argument used in \texttt{byAngleDefine} \ref{byAngleDefine} and such to call this particular angle style.

%\subsection{Arrows}

%commonArrowSettings
%byRotationArrowDefine
%byGenerateRotationArrowPath
%byNamedRotationArrow
%byFlatArrowDefine
%byNamedFlatArrow

%\subsection{Spheres}

%\subsection{Magnitudes}

%byMagnitudeSymbolDefine
%byNamedMagnitudeSymbol
%byMagnitudeDefine
%byNamedMagnitude

\subsection{Text labels}

%\subsubsection{byTextLabel(labelType, text, point, angle, distance)}\label{byTextLabel}
%Draws a text label. Returns a picture of the label.

\subsubsection{byLabelPoint(A, labelAngle, distance)}\label{byLabelPoint}
Draws a text label for a point. Returns a picture of the label.
	
	\texttt{A} — the point to label, of \texttt{suffix} type (i. e., point name should be provided).
	
	\texttt{labelAngle} — angle at which the label should be drawn in degrees.
	
	\texttt{distance} — distance at which the label should be drawn in \texttt{textLabelShift} units.

\subsubsection{byLabelLine(distance)(LINES\_LIST)}\label{byLabelLine}
	
	Draws text labels for lines. Returns a picture of the labels.
	
	\texttt{distance} — distance at which the labels should be drawn in \texttt{textLabelShift} units.
	
	\texttt{LINES\_LIST} — a comma-separated list of line names.

\subsubsection{byLabelPolygon(distance)(POLYGONS\_LIST)}\label{byLabelPolygon}
	
	Draws text labels for polygons. Returns a picture of the labels.
	
	\texttt{distance} — distance at which the labels should be drawn in \texttt{textLabelShift} units.
	
	\texttt{POLYGONS\_LIST} — a comma-separated list of polygon names.

%byLabelCircle

\subsubsection{byLabelsOnCircle(POINTS\_LIST)(CircleName)}\label{byLabelsOnCircle}
	
	Draws text labels for points on a circle. Returns a picture of the labels.
	
	\texttt{POINTS\_LIST} — a comma-separated list of point names.
	
	\texttt{CircleName} — circle name of \texttt{suffix type}.

\subsubsection{byLabelsOnPolygon(POINTS\_LIST)(style, shift)}\label{byLabelsOnPolygon}
	
	Draws text labels for points on a polygon. Returns a picture of the labels.
	
	\texttt{POINTS\_LIST} — a comma-separated list of point names.
	
	\texttt{style} — specifies which points to omit. \texttt{0} to draw labels for all listed points, \texttt{1} to draw labels for all listed points, except for the ones at straight angles, \texttt{2} omits first and last points, \texttt{3} omits first point, \texttt{1} omits last point.
	
	\texttt{shift} — negative to move labels closer, positive to move labels farther.

\subsubsection{byLabelLineEnd(A, B)(distance)}\label{byLabelLineEnd}
	
	Draws a text label for a line end. Returns a picture of the label.
	
	\texttt{A, B} — line ends, of \texttt{suffix} type (i. e., point name should be provided).
	
	\texttt{distance} — negative to move labels closer, positive to move labels farther.

%byLabelAngleCompensate

\section{\LaTeX\ part reference}

\subsection{General purpose macros}

\subsubsection{\textbackslash defineNewPicture[offspringPictureScaleFactor] [mainPictureScaleFactor] \{\METAPOST\ code\}}

	This macro is used to describe a main diagram.

	\texttt{offspringPictureScaleFactor} — how much smaller offspring pictures should be. \texttt{1/3} by default.
	
	\texttt{mainPictureScaleFactor} — scale factor for the main picture. \texttt{1} by default.
	
	\texttt{MP code} — actual \METAPOST\ code to describe the main picture.

\subsubsection{\textbackslash drawCurrentPicture}
	
	Draws the main diagram.

% \drawImageFromCurrentInstance

% \unmarkPictAsReady

% \addToUndefineList

\subsubsection{\textbackslash defineFromCurrentPicture\{verticalAlignment\} \{PictureName\} \{\METAPOST\ code\}}

	This macro is used to describe a diagram, based on the main diagram.

	\texttt{verticalAlignment} — vertical alignment declaration. \texttt{middle} to align the picture with the middle of the line, anything else for bottom alignment.

	\texttt{PictureName} — picture name.

	\texttt{MP code} — actual \METAPOST\ code to describe the picture.
	
	Can be drawn using \texttt{\textbackslash PictureName}.
	
\subsubsection{\textbackslash drawFromCurrentPicture[verticalAlignment] [PictureName] \{\METAPOST\ code\}}

	This macro is used to describe and draw a diagram, based on the main diagram.

	\texttt{verticalAlignment} — optional vertical alignment declaration. \texttt{middle} to align the picture with the middle of the line, anything else for bottom alignment.

	\texttt{PictureName} — optional picture name.

	\texttt{MP code} — actual \METAPOST\ code to describe the picture.
	
	Can be drawn again later using \texttt{\textbackslash PictureName}.

% \drawDefinedPicture

\subsection{Specialized macros}

\subsubsection{\textbackslash drawUnitLine[LineSecondName]\{LineName\}}

	Draws a line of unit length with colors and labels based on the line of the same name in the main diagram.

	\texttt{LineSecondName} — optional line name.
	
	\texttt{LineName} — name of the line to reference in the main diagram. 

	If a name is given, can be called later using \texttt{\textbackslash ulineLineNameLineSecondName}, otherwise — \texttt{\textbackslash ulineLineName}. 

\subsubsection{\textbackslash drawProportionalLine\{LineName\}}

	Draws a line with colors and labels based on and length linearly proportional to the line of the same name in the main diagram.

	\texttt{LineName} — name of the line to reference in the main diagram. 
	
	Can be called later using \texttt{\textbackslash plineLineName}.

%\drawProportionalLine

\subsubsection{\textbackslash drawSizedLine[LineSecondName]\{LineName\}}

	Draws a line with colors and labels based on and length proportional to the line of the same name in the main diagram.

	\texttt{LineSecondName} — optional line name. 
	
	\texttt{LineName} — name of the line to reference in the main diagram. 
	
	If a name is given, can be called later using \texttt{\textbackslash slineLineNameLineSecondName}, otherwise — \texttt{\textbackslash slineLineName}. 

\subsubsection{\textbackslash drawUnitRay[RayName]\{LineName\}}

	Draws a ray of unit length with colors and labels based on the line of the same name in the main diagram.

	\texttt{RayName} — optional ray name.
	
	\texttt{LineName} — name of the line to reference in the main diagram. 

	If a name is given, can be called later using \texttt{\textbackslash urayLineNameRayName}, otherwise — \texttt{\textbackslash urayLineName}. 

%\subsubsection{\textbackslash drawProportionalRay\{LineName\}}

%	Draws a ray.

%	\texttt{LineName} — name of the line to reference in the main diagram. 
	
%	Can be called later using \texttt{\textbackslash prayAngleName}.

%\drawSizedRay

%\drawUnitIndLine

%\drawProportionalIndLine

\subsubsection{\textbackslash drawRightAngle}

	Draws a right angle.

\subsubsection{\textbackslash drawTwoRightAngles}

	Draws two right angles.


\subsubsection{\textbackslash drawAngle\{AngleName\}}

	Draws an angle.

	\texttt{AngleName} — name of the angle to reference in the main diagram. 
	
	Can be called later using \texttt{\textbackslash angleAngleName}.
	
\subsubsection{\textbackslash drawAngleWithSides \{AngleName\}}

	Draws an angle and sections of its adjacent sides.

	\texttt{AngleName} — name of the angle to reference in the main diagram. 
	
	Can be called later using \texttt{\textbackslash anglewithsidesAngleName}.
	
\subsubsection{\textbackslash drawPolygon[verticalAlignment][PolygonNewName]\{PolygonName\}}

	Draws a polygon.

	\texttt{verticalAlignment} — optional vertical alignment declaration. \texttt{middle} to align the picture with the middle of the line, anything else for bottom alignment.

	\texttt{PolygonNewName} — optional polygon name. 
	
	\texttt{PolygonName} — name of the polygon to reference in the main diagram. 
	
	If a name is given, can be called later using \texttt{\textbackslash PolygonNewName}, otherwise — \texttt{\textbackslash polygonPolygonName}. 
	
\subsubsection{\textbackslash drawCircle[verticalAlignment][scaleFactor]\{CircleName\}}

	Draws a circle.

	\texttt{verticalAlignment} — optional vertical alignment declaration. \texttt{middle} to align the picture with the middle of the line, anything else for bottom alignment.
	
	\texttt{scaleFactor} — optional scale factor for the circle to replace the default offspring picture scale factor. 
	
	\texttt{CircleName} — name of the circle to reference in the main diagram. 
	
	Can be called later using \texttt{\textbackslash circleCircleName}.
	
\subsubsection{\textbackslash drawArc[verticalAlignment][scaleFactor]\{ArcName\}}

	Draws an arc.

	\texttt{verticalAlignment} — optional vertical alignment declaration. \texttt{middle} to align the picture with the middle of the line, anything else for bottom alignment.
	
	\texttt{scaleFactor} — optional scale factor for the arc to replace the default offspring picture scale factor. 
	
	\texttt{ArcName} — name of the arc to reference in the main diagram. 
	
	Can be called later using \texttt{\textbackslash arcCircleName}.
	
\subsubsection{\textbackslash drawLine[verticalAlignment][LineNewName]\{LineName\}}

	Draws a line.

	\texttt{verticalAlignment} — optional vertical alignment declaration. \texttt{middle} to align the picture with the middle of the line, anything else for bottom alignment.
	
	\texttt{LineNewName} — optional line name. 
	
	\texttt{LineName} — name of the line to reference in the main diagram. 
	
	If a name is given, can be called later using \texttt{\textbackslash LineNewName}, otherwise — \texttt{\textbackslash lineLineName}. 
	
\subsubsection{\textbackslash drawPointM\{PointName\}}

	Draws a point, depicted as a small circle.
	
	\texttt{PointName} — name of the point to reference in the main diagram. 
	
	Can be called later using \texttt{\textbackslash pointmPointName}. 

\subsubsection{\textbackslash drawPointL[verticalAlignment][LinesToOmit]\{PointName\}}

	Draws a point, depicted as line segments starting/ending in it.

	\texttt{verticalAlignment} — optional vertical alignment declaration. \texttt{middle} to align the picture with the middle of the line, anything else for bottom alignment.
	
	\texttt{LinesToOmit} — a comma-separated list lines, segments of which not to draw. 
	
	\texttt{PointName} — name of the point to reference in the main diagram. 
	
	If a list of lines to omit is given, can be called later using \texttt{\textbackslash pointlPointNameMinusLinesToOmit}, otherwise — \texttt{\textbackslash pointlPointName}. 

%\drawMagnitude

\end{document}